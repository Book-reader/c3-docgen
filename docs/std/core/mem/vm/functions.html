<!DOCTYPE html><html style = "font-family:'0xProto Nerd Font'"><head><link rel="stylesheet" href="../../../../style.css"></head><body><h2 class="header"><a href="../../../../std/core/mem/vm/index.html">Overview</a>&nbsp<a href="../../../../std/core/mem/vm/globals.html">Globals</a>&nbsp<a href="../../../../std/core/mem/vm/types.html">Types</a>&nbsp<span class="selected">Functions</span>&nbsp<a href="../../../../std/core/mem/vm/type.%s.html">Type</a>&nbsp</h2><div class="module_path"><h1><a href="../../../../std/index.html">std</a>::<a href="../../../../std/core/index.html">core</a>::<a href="../../../../std/core/mem/index.html">mem</a>::<span style="font-family: 'monospace'">vm</span></h1></div><h1>Public</h1><h2 id="mmap_file">mmap_file</h2>Map a portion of an already-opened file into memory.<pre><code><span class="DataType_KEYWORD DataType">fn</span> <span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">*</span><span class="DataType_DEFAULT DataType">?</span> <span class="DataType_FUNCTION DataType">mmap_file</span><span class="DataType_DEFAULT DataType">(</span><span class="DataType_TYPE DataType">Fd</span> <span class="DataType_IDENT DataType">fd</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">size</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">offset</span> <span class="DataType_DEFAULT DataType">=</span> <span class="DataType_NUMBER DataType">0</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_TYPE DataType">VirtualMemoryAccess</span> <span class="DataType_IDENT DataType">access</span> <span class="DataType_DEFAULT DataType">=</span> <span class="DataType_CONST DataType">READ</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_BUILTIN_TYPE DataType">bool</span> <span class="DataType_IDENT DataType">shared</span> <span class="DataType_DEFAULT DataType">=</span> <span class="DataType_KEYWORD DataType">false</span><span class="DataType_DEFAULT DataType">)</span> <span class="DataType_FUNCTION DataType">@if</span> <span class="DataType_DEFAULT DataType">(</span><span class="DataType_PATH DataType">env::</span><span class="DataType_CONST DataType">POSIX</span><span class="DataType_DEFAULT DataType">)</span></code></pre><h2 id="protect">protect</h2>Change the access protection of a region in memory. The region must be page aligned.<pre><code><span class="DataType_KEYWORD DataType">fn</span> <span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">?</span> <span class="DataType_FUNCTION DataType">protect</span><span class="DataType_DEFAULT DataType">(</span><span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">*</span> <span class="DataType_IDENT DataType">ptr</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">len</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_TYPE DataType">VirtualMemoryAccess</span> <span class="DataType_IDENT DataType">access</span><span class="DataType_DEFAULT DataType">)</span></code></pre><h2 id="aligned_alloc_size">aligned_alloc_size</h2><pre><code><span class="DataType_KEYWORD DataType">fn</span> <span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_FUNCTION DataType">aligned_alloc_size</span><span class="DataType_DEFAULT DataType">(</span><span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">size</span><span class="DataType_DEFAULT DataType">)</span></code></pre><h2 id="release">release</h2>Release memory allocated with &quot;alloc&quot;.<pre><code><span class="DataType_KEYWORD DataType">fn</span> <span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">?</span> <span class="DataType_FUNCTION DataType">release</span><span class="DataType_DEFAULT DataType">(</span><span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">*</span> <span class="DataType_IDENT DataType">ptr</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">size</span><span class="DataType_DEFAULT DataType">)</span></code></pre><h2 id="alloc">alloc</h2>Allocate virtual memory, size is rounded up to platform granularity (Win32) / page size (Posix).<pre><code><span class="DataType_KEYWORD DataType">fn</span> <span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">*</span><span class="DataType_DEFAULT DataType">?</span> <span class="DataType_FUNCTION DataType">alloc</span><span class="DataType_DEFAULT DataType">(</span><span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">size</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_TYPE DataType">VirtualMemoryAccess</span> <span class="DataType_IDENT DataType">access</span><span class="DataType_DEFAULT DataType">)</span></code></pre><h2 id="commit">commit</h2>Makes a region of memory available that was previously retrieved using &apos;alloc&apos;. This is necessary on Win32,but optional on Posix.<pre><code><span class="DataType_KEYWORD DataType">fn</span> <span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">?</span> <span class="DataType_FUNCTION DataType">commit</span><span class="DataType_DEFAULT DataType">(</span><span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">*</span> <span class="DataType_IDENT DataType">ptr</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">len</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_TYPE DataType">VirtualMemoryAccess</span> <span class="DataType_IDENT DataType">access</span> <span class="DataType_DEFAULT DataType">=</span> <span class="DataType_CONST DataType">READWRITE</span><span class="DataType_DEFAULT DataType">)</span></code></pre><h2 id="virtual_alloc">virtual_alloc</h2>Create a VirtualMemory using<pre><code><span class="DataType_KEYWORD DataType">fn</span> <span class="DataType_TYPE DataType">VirtualMemory</span><span class="DataType_DEFAULT DataType">?</span> <span class="DataType_FUNCTION DataType">virtual_alloc</span><span class="DataType_DEFAULT DataType">(</span><span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">size</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_TYPE DataType">VirtualMemoryAccess</span> <span class="DataType_IDENT DataType">access</span> <span class="DataType_DEFAULT DataType">=</span> <span class="DataType_CONST DataType">PROTECTED</span><span class="DataType_DEFAULT DataType">)</span></code></pre><h2 id="decommit">decommit</h2>Notifies that the memory in the region can be released back to the OS. On Win32 this decommits the region,whereas on Posix it tells the system that it may be reused using madvise. The &quot;block&quot; parameter is onlyrespected on Posix, and protects the region from read/write/exec. On Win32 this always happens.<pre><code><span class="DataType_KEYWORD DataType">fn</span> <span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">?</span> <span class="DataType_FUNCTION DataType">decommit</span><span class="DataType_DEFAULT DataType">(</span><span class="DataType_BUILTIN_TYPE DataType">void</span><span class="DataType_DEFAULT DataType">*</span> <span class="DataType_IDENT DataType">ptr</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_BUILTIN_TYPE DataType">usz</span> <span class="DataType_IDENT DataType">len</span><span class="DataType_DEFAULT DataType">,</span> <span class="DataType_BUILTIN_TYPE DataType">bool</span> <span class="DataType_IDENT DataType">block</span> <span class="DataType_DEFAULT DataType">=</span> <span class="DataType_KEYWORD DataType">true</span><span class="DataType_DEFAULT DataType">)</span></code></pre></body></html>